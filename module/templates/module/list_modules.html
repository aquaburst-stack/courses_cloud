{% extends "courses_cloud/layout.html" %}

{% block title %}
    All Modules
{% endblock %}


{% block css %}

{% endblock %}


{% block body %}
    <h1 class="p-3 text-primary-emphasis bg-primary-subtle border border-primary-subtle rounded-3">
        Modules
    </h1>
    <div>
        <ul>
            {% for data in data_obj %}
                <li>
                    <p>
                        <span class="mx-3">
                            <a href="{% url 'module' %}?code={{ data.module.code }}">{{ data.module.name }}</a>
                        </span>
                        
                        {% if request.user.is_authenticated and group %}
                            {% if data.status %}
                                <span class="mx-3">
                                    <a href="{% url 'list_modules' %}?register=0&code={{data.module.code}}">
                                        <button class="btn btn-primary">Unregister</button>
                                    </a>
                                </span>
                                
                                <span class="mx-3">
                                    <img src="{{student.photo.url}}" alt="student image" height="50" width="50">
                                </span>
                            {% else %}
                                {% if data.module.availability == 'Open' %}
                                    <a href="{% url 'list_modules' %}?register=1&code={{data.module.code}}">
                                        <button class="btn btn-primary">Register</button>
                                    </a>
                                {% endif %}
                            {% endif %}
                        {% endif %}
                    </p>
                </li>
            {% empty %}
                <li>Currently no modules.</li>
            {% endfor %}
        </ul>
    </div>
{% endblock %}